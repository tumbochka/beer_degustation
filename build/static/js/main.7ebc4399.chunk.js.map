{"version":3,"sources":["firebase.js","auth/Google.js","components/SignIn.js","config.js","persistence/Persistence.js","components/UserProfile.js","services/Untappd.js","components/UntappdCallback.js","components/UserEdit.js","components/Beer.js","services/Beer.js","services/Degustation.js","components/AskBeerRate.js","components/AddBeer.js","components/DegustationProperties.js","components/Degustation.js","components/AddDegustation.js","components/Degustations.js","components/DegustationSelector.js","components/Application.js","App.js","index.js","../node_modules/firebase-functions/lib sync"],"names":["firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","appId","auth","firestore","enablePersistence","catch","err","code","console","log","provider","GoogleAuthProvider","SignIn","useState","error","setError","className","onClick","signInWithPopup","e","message","config","apiUrl","window","location","origin","untappdApiUrl","untappdAuthenticateUrl","untappdAuthorizeUrl","untappdClientId","process","untappdClitntSecret","googleClientId","googleDeveloperKey","googleServiceAccountEmail","googleServiceAccountKey","createUser","user","additionalData","a","userRef","doc","uid","get","exists","email","photoURL","set","getUser","updateUser","firstName","lastName","untappdName","untappdAccessToken","update","userDocument","data","getDegustations","collection","snapshot","docs","map","id","updateDegustation","degustation","updateClientDegustation","functions","httpsCallable","createDegustation","date","title","avatar","getDegustation","degustationId","UserProfile","logoPath","isAuthRequestSent","setAuthRequestSent","photoUrl","callback","untappdAuthorize","callbackUrl","protocol","host","url","clientId","clientSecret","redirectUrl","then","result","accessToken","JSON","parse","response","access_token","userDetailsUrl","untappdFetchUserDetails","untappdUser","untappdEmail","settings","email_address","last_name","first_name","user_avatar_hd","user_name","Container","Row","Col","css","to","state","Button","event","preventDefault","authenticateUrl","encodeURIComponent","replace","populateDataFromUntappd","signOut","UntappdCallback","useLocation","search","UserEdit","setEmail","setFirstName","setLastName","setPhotoURL","setUntappdName","updateUserHandler","navigate","onChangeHandler","currentTarget","name","value","htmlFor","type","placeholder","onChange","Beer","beer","buttons","mode","currentRate","avg","rates","length","rate","find","rateItem","reduce","b","Number","key","src","beer_label","alt","DEGUSTATION_TYPE_EDIT","bid","brewery","brewery_name","beer_name","beer_style","beer_abv","beer_ibu","OverlayTrigger","placement","delay","show","hide","overlay","props","Tooltip","beer_description","substring","shout","Math","round","button","onClickCaption","updateBeer","getBeerDetailsFromUntappd","beerFromUntappd","beers","beerItem","rating_score","fetchBeerDetails","searchBeerOnUntappd","Promise","resolve","reject","userId","sortBeers","fieldName","direction","sort","resolvePath","object","path","defaultValue","split","filter","p","o","AskBeerRate","refreshBeers","onClose","mask","setMask","setRate","setShout","Form","Group","as","Control","tooltip","step","min","max","target","rateBeer","beerId","freshDegustation","AddBeer","setBeer","foundBeers","setFoundBeers","isSearching","setSearching","formDisabled","setFormDisabled","beerName","breweryName","beerIbu","beerAbv","beerStyle","beerPlato","beerVolume","values","setValues","useEffect","timeOutId","setTimeout","clearTimeout","clearValues","handleInputChange","newValues","plato","volume","newBeer","checkin_count","picture","rating","brewery_id","brewery_slug","brewery_label","country_name","isNaN","searchOnUntappd","searchStr","searchBeer","Label","column","sm","disabled","push","foundBeer","beerToValues","DegustationProperties","editDegustationProperties","setEditDegustationProperties","seconds","Date","degustationValues","setDegustationValues","selected","toISOString","reload","finally","DEGUSTATION_TYPE_TAKE_PART","Degustation","sortCurrentDegustationBeers","beersToSelect","setBeersToSelect","beerToSelect","setBeerToSelect","fetchingBeerDetails","setFetchingBeerDetails","beerToRate","setBeerToRate","setBeers","pushToFoundBeers","index","findIndex","updatedBeer","searchAllBeersOnUntappd","forEach","searchBeers","originalBeer","all","pop","fluid","renderBeerForSelection","position","defaultOpen","open","closeOnDocumentClick","href","toDateString","exportAllRates","center","caption","filterBeer","removeBeerFromDegustation","saveDegustationToGoogle","exportDegustationToGoogleSheet","AddDegustation","Degustations","degustations","setDegustations","setDegustation","degustationMode","setDegustationMode","match","useMatch","history","replaceState","sortedDegustations","date1","sortedDegustation","registerUserForDegustation","DegustationSelector","fetchGoogleSheet","action","getDegustationDataFromGoogleSheet","developerKey","scope","onAuthFailed","multiselect","navHidden","authImmediate","mimeTypes","query","viewId","Application","prop","App","setUser","previousUserAuth","setPreviousUserAuth","onAuthStateChanged","userAuth","app","ReactDOM","render","document","getElementById","webpackEmptyContext","req","Error","keys","module","exports"],"mappings":"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","file":"static/js/main.7ebc4399.chunk.js","sourcesContent":["// Firebase App (the core Firebase SDK) is always required and must be listed first\r\nimport * as firebase from \"firebase/app\";\r\nimport '@firebase/messaging';\r\n\r\n// If you enabled Analytics in your project, add the Firebase SDK for Analytics\r\nimport \"firebase/analytics\";\r\n\r\n// Add the Firebase products that you want to use\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDs42kUWGtEpwneo0cAUAGi8lUKpVD3Iik\",\r\n  authDomain: \"beer-degustation.firebaseapp.com\",\r\n  databaseURL: \"https://beer-degustation.firebaseio.com\",\r\n  projectId: \"beer-degustation\",\r\n  storageBucket: \"beer-degustation.appspot.com\",\r\n//  messagingSenderId: \"1058720130453\",\r\n  appId: \"1:1058720130453:web:7dc1000cd81db0be68829c\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\n\r\n//export const messaging = firebase.messaging();\r\n\r\nfirestore.enablePersistence().catch(err => {\r\n  if (err.code === 'failed-precondition') {\r\n    // Multiple tabs open, persistence can only be enabled\r\n    // in one tab at a a time.\r\n    console.log('persistance failed');\r\n  } else if (err.code === 'unimplemented') {\r\n    // The current browser does not support all of the\r\n    // features required to enable persistence\r\n    console.log('persistance not available');\r\n  }\r\n});\r\n\r\n\r\n// export const requestFirebaseNotificationPermission = () =>\r\n//   new Promise((resolve, reject) => {\r\n//     messaging\r\n//       .requestPermission()\r\n//       .then(() => messaging.getToken())\r\n//       .then((firebaseToken) => {\r\n//         resolve(firebaseToken);\r\n//       })\r\n//       .catch((err) => {\r\n//         reject(err);\r\n//       });\r\n//   });\r\n//\r\n// export const onMessageListener = () =>\r\n//   new Promise((resolve) => {\r\n//     messaging.onMessage((payload) => {\r\n//       resolve(payload);\r\n//     });\r\n//   });\r\n","import * as firebase from \"firebase\";\r\nimport {auth} from \"../firebase\";\r\n\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport const signInWithGoogle = () => {\r\n  auth.signInWithPopup(provider);\r\n};\r\n","import React, {useState} from \"react\";\r\nimport {signInWithGoogle} from \"../auth/Google\";\r\n\r\nconst SignIn = () => {\r\n\r\n  const [error, setError] = useState(null);\r\n\r\n  const googleSignIn = () => {\r\n    try {\r\n      signInWithGoogle();\r\n    } catch (e) {\r\n      setError(e.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"mt-8\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign In</h1>\r\n      <div className=\"border border-blue-400 mx-auto w-11/12 md:w-2/4 rounded py-8 px-4 md:px-8\">\r\n        {error !== null && <div className = \"py-4 bg-red-600 w-full text-white text-center mb-3\">{error}</div>}\r\n        <button\r\n          className=\"bg-red-500 hover:bg-red-600 w-full py-2 text-white\"\r\n          onClick={googleSignIn}\r\n        >\r\n          Sign in with Google\r\n\r\n        </button>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignIn;\r\n","const config = {\r\n  apiUrl:\r\n    process.env.NODE_ENV === \"production\" ? window.location.origin : \"http://\" + window.location.hostname + \":5000\",\r\n  untappdApiUrl: \"https://api.untappd.com/v4/\",\r\n  untappdAuthenticateUrl: \"https://untappd.com/oauth/authenticate/\",\r\n  untappdAuthorizeUrl: \"https://untappd.com/oauth/authorize/\",\r\n  untappdClientId: process.env.REACT_APP_UNTAPPD_CLIENT_ID,\r\n  untappdClitntSecret: process.env.REACT_APP_UNTAPPD_CLIENT_SECRET,\r\n  googleClientId: process.env.REACT_APP_GOOGLE_CLIENT_ID,\r\n  googleDeveloperKey: process.env.REACT_APP_GOOGLE_DEVELOPER_KEY,\r\n  googleServiceAccountEmail: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_EMAIL,\r\n  googleServiceAccountKey: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_KEY\r\n};\r\n\r\nexport default config;\r\n","import {firestore} from \"../firebase\";\r\nimport firebase from \"firebase\";\r\n\r\nexport const createUser = async (user, additionalData) => {\r\n  if (!user) return;\r\n  const userRef = firestore.doc(`users/${user.uid}`);\r\n  const snapshot = await userRef.get();\r\n  if (!snapshot.exists) {\r\n    const { email,  photoURL } = user;\r\n    try {\r\n      await userRef.set({\r\n        email,\r\n        photoURL,\r\n        ...additionalData\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error creating user\", error);\r\n    }\r\n  }\r\n  return getUser(user.uid);\r\n};\r\n\r\nexport const updateUser = async (user, additionalData) => {\r\n  if (!user) return;\r\n  const userRef = firestore.doc(`users/${user.uid}`);\r\n  const snapshot = await userRef.get();\r\n  if (snapshot.exists) {\r\n    const { firstName, lastName, email,  photoURL, untappdName, untappdAccessToken } = user;\r\n    try {\r\n      await userRef.update({\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        photoURL,\r\n        untappdName,\r\n        untappdAccessToken,\r\n        ...additionalData\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error updating user\", error);\r\n    }\r\n  }\r\n}\r\n\r\nexport const getUser = async (uid)   => {\r\n  if (!uid) return null;\r\n  try {\r\n    const userDocument = await firestore.doc(`users/${uid}`).get();\r\n    return {\r\n      uid,\r\n      ...userDocument.data()\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Error fetching user\", error);\r\n  }\r\n};\r\n\r\nexport const getDegustations = async () => {\r\n  try {\r\n    const snapshot  = await firestore.collection('degustations').get();\r\n\r\n    return snapshot.docs.map(doc => {\r\n      return {\r\n        ...doc.data(),\r\n        ...{id: doc.id}\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error fetching degustations\", error);\r\n  }\r\n}\r\n\r\nexport const updateDegustation = async (degustation) => {\r\n  const updateClientDegustation = firebase.functions().httpsCallable('updateClientDegustation');\r\n  console.log('updating', degustation);\r\n  try {\r\n    const updateDegustation = await updateClientDegustation({degustation});\r\n\r\n    return updateDegustation.data;\r\n  } catch (err) {\r\n    console.error(\"Error updating degustation\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const createDegustation = async (date, title, avatar, location) => {\r\n  const createDegustation = firebase.functions().httpsCallable('createDegustation');\r\n  try {\r\n    const degustation = await createDegustation(date, title, avatar, location);\r\n\r\n    return degustation.data;\r\n  } catch (err) {\r\n    console.error(\"Error creating degustation\", err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const getDegustation = async (degustationId) => {\r\n  const doc = firestore.doc(`degustations/${degustationId}`);\r\n  try {\r\n    const degustation = await doc.get();\r\n    return degustation.data();\r\n  } catch (error) {\r\n    console.error(\"Error updating degustation\", error);\r\n  }\r\n}\r\n","/** @jsx jsx */\r\nimport React, {useState} from \"react\";\r\nimport {auth} from \"../firebase\";\r\nimport { css, jsx } from '@emotion/core';\r\nimport {Link} from \"@reach/router\";\r\nimport config from \"../config\";\r\nimport {untappdAuthorize} from \"../services/Untappd\";\r\nimport {updateUser} from \"../persistence/Persistence\";\r\nimport {Container, Row, Col, Button} from \"react-bootstrap\";\r\n\r\n\r\nconst UserProfile = (data) => {\r\n  const [isAuthRequestSent, setAuthRequestSent] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const {photoURL, firstName, lastName, untappdName, email, photoUrl} = data.user;\r\n  const code = data.code;\r\n\r\n  let logoPath;\r\n  if (photoUrl) {\r\n    logoPath = photoUrl;\r\n  } else if (photoURL) {\r\n    logoPath = photoURL;\r\n  } else {\r\n    logoPath = 'https://res.cloudinary.com/dqcsk8rsc/image/upload/v1577268053/avatar-1-bitmoji_upgwhc.png';\r\n  }\r\n\r\n  const populateDataFromUntappd = (event) => {\r\n    event.preventDefault();\r\n    const callbackUrl = window.location.protocol + '//' + window.location.host + '/callback';\r\n    const authenticateUrl =\r\n      `${config.untappdAuthenticateUrl}?client_id=${encodeURIComponent(config.untappdClientId)}&client_secret=${encodeURIComponent(config.untappdClitntSecret)}&response_type=code&redirect_url=${callbackUrl}`;\r\n    window.location.replace(authenticateUrl);\r\n  }\r\n\r\n  if(code && !isAuthRequestSent) {\r\n    setAuthRequestSent(true);\r\n    untappdAuthorize(code, (result) => {\r\n      if (result.error) {\r\n        setError(result.error);\r\n      } else {\r\n        updateUser(data.user, result);\r\n      }\r\n      setAuthRequestSent(false);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {error !== null && (\r\n        <div>\r\n          {error}\r\n        </div>\r\n      )}\r\n      <Container>\r\n        <Row>\r\n          <Col>\r\n        <div\r\n          css={css`\r\n          background: url(${logoPath})  no-repeat center center;\r\n          backgroundSize: cover;\r\n          height: 200px;\r\n          width: 200px;\r\n        `}\r\n        > </div>\r\n          </Col>\r\n        </Row>\r\n          <Row>\r\n            <Col>{firstName}</Col>\r\n            <Col>{lastName}</Col>\r\n          <Col>{untappdName}</Col>\r\n            <Col>{email}</Col>\r\n          </Row>\r\n\r\n\r\n      <Row>\r\n        <Col>\r\n        <Link to=\"Edit\" state={{ user: data.user}}>Edit User Profile</Link>\r\n        </Col>\r\n        <Col>\r\n          <Link to=\"DegustationSelector\"> Import a degustation</Link>\r\n        </Col>\r\n        <Col>\r\n          <Link to=\"Degustations\"> View degustations</Link>\r\n        </Col>\r\n        <Col>\r\n          <Button onClick={event => populateDataFromUntappd(event)}>\r\n            Populate user data from Untappd\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n        <Button onClick = {() => {auth.signOut()}}>Sign out</Button>\r\n        </Col>\r\n      </Row>\r\n      </Container>\r\n    </div>\r\n\r\n  )\r\n};\r\nexport default UserProfile;\r\n","import firebase from \"firebase\";\r\nimport config from \"../config\";\r\n\r\nexport const untappdAuthorize = (code, callback) => {\r\n  const untappdAuthorize = firebase.functions().httpsCallable('untappdAuthorize');\r\n  const callbackUrl = window.location.protocol + '//' + window.location.host + '/callback';\r\n  untappdAuthorize({\r\n    url: config.untappdAuthorizeUrl,\r\n    clientId: config.untappdClientId,\r\n    clientSecret: config.untappdClitntSecret,\r\n    redirectUrl: callbackUrl,\r\n    code: code\r\n  }).then(result => {\r\n    const data = JSON.parse(result.data);\r\n    const accessToken = data.response.access_token;\r\n    const userDetailsUrl = config.untappdApiUrl + 'user/info/';\r\n    const untappdFetchUserDetails = firebase.functions().httpsCallable('untappdFetchUserDetails');\r\n    untappdFetchUserDetails({\r\n      url: userDetailsUrl,\r\n      accessToken: accessToken\r\n    }).then(result => {\r\n      const data = JSON.parse(result.data);\r\n      const untappdUser = data.response.user;\r\n\r\n      callback({\r\n        untappdEmail: untappdUser.settings.email_address,\r\n        lastName: untappdUser.last_name,\r\n        firstName: untappdUser.first_name,\r\n        photoUrl: untappdUser.user_avatar_hd,\r\n        untappdName: untappdUser.user_name,\r\n        untappdAccessToken: accessToken\r\n      });\r\n    }).catch(error => {\r\n      console.log('auth error');\r\n      callback({error: error.message});\r\n    });\r\n  }).catch(error => {\r\n    console.log('auth error');\r\n    callback({error: error.message});\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport { useLocation } from \"@reach/router\"\r\nimport { parse } from \"query-string\"\r\nimport UserProfile from \"./UserProfile\";\r\n\r\nconst UntappdCallback = ({user}) => {\r\n  const location = useLocation();\r\n  const query = parse(location.search);\r\n  const code = query.code;\r\n\r\n  return (\r\n    <UserProfile code={code} user={user} />\r\n    );\r\n}\r\n\r\nexport default UntappdCallback;\r\n","import React, {useState} from \"react\";\r\nimport { navigate } from \"@reach/router\"\r\nimport {updateUser} from \"../persistence/Persistence\";\r\n\r\nconst UserEdit = (data) => {\r\n  const user = data.user;\r\n\r\n  const [email, setEmail] = useState(user.email);\r\n  const [firstName, setFirstName] = useState(user.firstName);\r\n  const [lastName, setLastName] = useState(user.lastName);\r\n  const [photoURL, setPhotoURL] = useState(user.photoURL);\r\n  const [untappdName, setUntappdName] = useState(user.untappdName);\r\n  const [error, setError] = useState(null);\r\n\r\n  const updateUserHandler = async (event) => {\r\n    event.preventDefault();\r\n    try{\r\n      updateUser(user, {firstName, lastName, photoURL, untappdName});\r\n      await navigate('/');\r\n    }\r\n    catch(error){\r\n      setError('Error updating: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const onChangeHandler = event => {\r\n    const { name, value } = event.currentTarget;\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    } else if (name === \"firstName\") {\r\n      setFirstName(value);\r\n    } else if (name === \"lastName\") {\r\n      setLastName(value);\r\n    } else if (name === \"photoURL\") {\r\n      setPhotoURL(value);\r\n    } else if (name === 'untappdName') {\r\n      setUntappdName(value);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-8\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign Up</h1>\r\n      <div className=\"border border-blue-400 mx-auto w-11/12 md:w-2/4 rounded py-8 px-4 md:px-8\">\r\n        {error !== null && (\r\n          <div className=\"py-4 bg-red-600 w-full text-white text-center mb-3\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <form className=\"\">\r\n          <label htmlFor=\"firstName\" className=\"block\">\r\n            First Name:\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"my-1 p-1 w-full \"\r\n            name=\"firstName\"\r\n            value={firstName}\r\n            placeholder=\"E.g: Eugene\"\r\n            id=\"firstName\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"lastName\" className=\"block\">\r\n            Last Name:\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"my-1 p-1 w-full \"\r\n            name=\"lastName\"\r\n            value={lastName}\r\n            placeholder=\"E.g: Sodin\"\r\n            id=\"lastName\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"my-1 p-1 w-full\"\r\n            name=\"userEmail\"\r\n            value={email}\r\n            placeholder=\"E.g: eugene@gmail.com\"\r\n            id=\"userEmail\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"photoURL\" className=\"block\">\r\n            Photo Url:\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"my-1 p-1 w-full \"\r\n            name=\"photoURL\"\r\n            value={photoURL}\r\n            id=\"lastName\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"photoURL\" className=\"block\">\r\n            Untappd Name:\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"my-1 p-1 w-full \"\r\n            name=\"untappdName\"\r\n            value={untappdName}\r\n            id=\"untappdName\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n          <button\r\n            className=\"bg-green-400 hover:bg-green-500 w-full py-2 text-white\"\r\n            onClick={event => {\r\n              updateUserHandler(event);\r\n            }}\r\n          >\r\n            Update\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserEdit;\r\n","import React from \"react\";\r\nimport {Row, Col, Button, OverlayTrigger, Tooltip} from \"react-bootstrap\";\r\nimport {DEGUSTATION_TYPE_EDIT} from \"./Degustation\";\r\n\r\nconst Beer = ({\r\n    beer,\r\n    user,\r\n    // onClick,\r\n    // onClickCaption\r\n    buttons,\r\n  mode\r\n  }) => {\r\n    const renderButtons = () => {\r\n        return buttons.map(\r\n            button => {\r\n                return <Col>\r\n                    <Button onClick={button.onClick}>{button.onClickCaption}</Button>\r\n            </Col>\r\n            }\r\n       )\r\n    }\r\n\r\n    let currentRate = null, avg = 0;\r\n    if(beer.rates && beer.rates.length) {\r\n        const rate = beer.rates.find(rateItem => rateItem.user === user.uid);\r\n        if(rate) {\r\n            currentRate = rate;\r\n        }\r\n        avg = (beer.rates.map(rate=>rate.rate).reduce(((a, b) => a+Number(b)), 0)) / beer.rates.length;\r\n    }\r\n  const renderTooltip = (props) => {\r\n    return (\r\n      <Tooltip id={\"tooltip\" + beer.id} {...props}>\r\n        {beer.beer.beer_description}\r\n      </Tooltip>\r\n    );\r\n  }\r\n\r\n    const renderShout = (props) => {\r\n        return(\r\n        <Tooltip id={\"shout\" + beer.id} {...props}>\r\n            { currentRate && currentRate.shout ? currentRate.shout : '--'}\r\n        </Tooltip>\r\n        )\r\n    }\r\n  return (\r\n    <Row key={beer.id}  className='row-cols-10'>\r\n      <Col className=\"colLabel\">\r\n          <img\r\n            className=\"beerLabel\"\r\n            src={beer.beer.beer_label ? beer.beer.beer_label : 'https://untappd.akamaized.net/site/assets/images/temp/badge-beer-default.png'}\r\n            alt='Beer label'\r\n          />\r\n      </Col>\r\n      {DEGUSTATION_TYPE_EDIT === mode ? <Col>\r\n        {beer.beer.bid}\r\n      </Col> : ''}\r\n\r\n      <Col className=\"colWrap\">\r\n        {beer.brewery.brewery_name}\r\n      </Col>\r\n        <Col className=\"colWrap\">\r\n        {beer.beer.beer_name}\r\n      </Col><Col className=\"colWrap\">\r\n        {beer.beer.beer_style}\r\n      </Col><Col>\r\n        {beer.beer.beer_abv} <br/> {beer.beer.beer_ibu}\r\n      </Col><Col className=\"colWrap\">\r\n      <OverlayTrigger\r\n        key={\"overlay\" + beer.id}\r\n        placement=\"left\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={renderTooltip}\r\n      >\r\n        <div>\r\n        {beer.beer.beer_description ? beer.beer.beer_description.substring(0, 40) + ' ...' : ''}\r\n        </div>\r\n      </OverlayTrigger>\r\n      </Col>\r\n        <Col>\r\n            <OverlayTrigger\r\n                key={\"shout\" + beer.id}\r\n                placement=\"left\"\r\n                delay={{ show: 250, hide: 400 }}\r\n                overlay={renderShout}\r\n            >\r\n                <div>\r\n                    {currentRate ? currentRate.rate : '--'}\r\n                    /\r\n                    {currentRate ? Math.round(avg * 100)/100 : '--'}\r\n                </div>\r\n            </OverlayTrigger>\r\n        </Col>\r\n      {renderButtons() }\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default Beer;\r\n","import firebase from \"firebase\";\r\nimport {updateDegustation} from \"../persistence/Persistence\";\r\n\r\n\r\nexport const updateBeer = async (degustation, beer) => {\r\n  const getBeerDetailsFromUntappd = firebase.functions().httpsCallable('getBeerDetailsFromUntappd');\r\n  const result = await getBeerDetailsFromUntappd({\r\n    bid: beer.beer.bid\r\n  });\r\n\r\n  const beerFromUntappd = result.data;\r\n\r\n  if(beerFromUntappd) {\r\n    degustation.beers = degustation.beers.map(beerItem => {\r\n      if(\r\n          (beerItem.id && beer.id && beerItem.id === beer.id) ||\r\n          (beerItem.beer.bid && beer.beer.bid && beerItem.beer.bid === beer.beer.bid)\r\n      ) {\r\n        beerItem.brewery = beerFromUntappd.brewery;\r\n        beerItem.beer = {...beerItem.beer,\r\n          bid: beerFromUntappd.bid,\r\n          beer_abv: beerFromUntappd.beer_abv,\r\n          beer_name: beerFromUntappd.beer_name,\r\n          beer_label: beerFromUntappd.beer_label,\r\n          beer_ibu: beerFromUntappd.beer_ibu,\r\n          beer_description: beerFromUntappd.beer_description,\r\n          beer_style: beerFromUntappd.beer_style,\r\n          rating_score: beerFromUntappd.rating_score\r\n        }\r\n      }\r\n      return beerItem;\r\n    });\r\n\r\n    return await updateDegustation(degustation);\r\n  }\r\n\r\n  return degustation;\r\n}\r\n\r\nexport const fetchBeerDetails = async (bid) => {\r\n  const getBeerDetailsFromUntappd = firebase.functions().httpsCallable('getBeerDetailsFromUntappd');\r\n  const result =  await getBeerDetailsFromUntappd({\r\n    bid: bid\r\n  });\r\n  if(result && result.data) {\r\n    const beerFromUntappd = result.data;\r\n    const beerItem = {};\r\n    beerItem.brewery = beerFromUntappd.brewery;\r\n    beerItem.beer = {\r\n      bid: beerFromUntappd.bid,\r\n      beer_abv: beerFromUntappd.beer_abv,\r\n      beer_name: beerFromUntappd.beer_name,\r\n      beer_label: beerFromUntappd.beer_label,\r\n      beer_ibu: beerFromUntappd.beer_ibu,\r\n      beer_description: beerFromUntappd.beer_description,\r\n      beer_style: beerFromUntappd.beer_style,\r\n      rating_score: beerFromUntappd.rating_score\r\n    }\r\n\r\n    return beerItem;\r\n  }\r\n\r\n  return null;\r\n\r\n}\r\n\r\n//export const searchOnUntappd = search =>\r\nexport const searchOnUntappd = search => {\r\n  return new Promise((resolve, reject) => {\r\n    const searchOnUntappd = firebase.functions().httpsCallable('searchOnUntappd');\r\n    searchOnUntappd({\r\n      searchStr: search\r\n    })\r\n        .then(result => {\r\n          const beers = result.data;\r\n          if (!beers || 0 === beers.length) {\r\n            reject(\"Can't find beer: \" + search);\r\n          } else {\r\n            resolve(beers);\r\n          }\r\n        })\r\n  })\r\n}\r\n\r\nexport const searchBeerOnUntappd = (beer, user) => {\r\n  return new Promise((resolve, reject) => {\r\n    if(beer.beer.bid) {\r\n      resolve([beer]);\r\n    } else {\r\n      if (!beer.brewery.brewery_name || !beer.beer.beer_name) {\r\n        reject('Please fill up the brewery name and the beer name');\r\n      }\r\n      const searchBeerOnUntappd = firebase.functions().httpsCallable('searchBeerOnUntappd');\r\n      searchBeerOnUntappd({\r\n        beer_name: beer.beer.beer_name,\r\n        brewery_name: beer.brewery.brewery_name,\r\n        userId: user.uid,\r\n      })\r\n        .then(result => {\r\n          const beers = result.data;\r\n          if (!beers || 0 === beers.length) {\r\n            reject(\"Can't find beer: \" + beer.brewery.brewery_name + ' ' + beer.beer.beer_name);\r\n          } else {\r\n            resolve(beers);\r\n          }\r\n        })\r\n    }\r\n  });\r\n}\r\n\r\nexport const removeBeerFromDegustation = (degustation, beer) => {\r\n  degustation.beers = degustation.beers.filter(filterBeer => {\r\n    if(filterBeer.id && beer.id) {\r\n      return filterBeer.id !== beer.id;\r\n    }\r\n    if(filterBeer.beer && beer.beer) {\r\n      if(filterBeer.beer.bid && beer.beer.bid) {\r\n        return filterBeer.beer.bid !== beer.beer.bid;\r\n      }\r\n      return filterBeer.beer.name !== beer.beer.name;\r\n    }\r\n    return false;\r\n  });\r\n  updateDegustation(degustation);\r\n  return degustation;\r\n}\r\n","import firebase from \"firebase\";\r\n\r\nexport const exportDegustationToGoogleSheet = (degustation) => {\r\n  const saveDegustationToGoogle = firebase.functions().httpsCallable('saveDegustationToGoogle');\r\n  return saveDegustationToGoogle({degustation: degustation});\r\n}\r\n\r\nexport const rateBeer = (degustation, beer, user, rate, shout) => {\r\n  const rateBeer = firebase.functions().httpsCallable('rateBeer');\r\n\r\n  return rateBeer({\r\n    degustationId: degustation.id,\r\n    beerId: beer.id,\r\n    userId: user.uid,\r\n    rate: rate,\r\n    shout: shout\r\n  });\r\n}\r\n  export const sortBeers = (beers, fieldName, direction) =>{\r\n    return beers.sort(function(a, b){\r\n      console.log(\"a\", resolvePath(a, fieldName));\r\n      console.log(\"b\", resolvePath(b, fieldName));\r\n      if (resolvePath(a, fieldName)<resolvePath(b, fieldName) && direction === 'asc') {\r\n          return -1;\r\n      }\r\n      if (resolvePath(a, fieldName)>resolvePath(b, fieldName) && direction === 'asc') {\r\n          return 1;\r\n          }\r\n        if (resolvePath(a, fieldName)>resolvePath(b, fieldName) && direction === 'desc') {\r\n            return -1;\r\n        }\r\n        if (resolvePath(a, fieldName)<resolvePath(b, fieldName) && direction === 'desc') {\r\n            return 1;\r\n        }\r\n\r\n\r\n      return 0;\r\n\r\n\r\n\r\n    })\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport const exportAllRates = (degustation) => {\r\n  const exportAllRates = firebase.functions().httpsCallable('exportAllRates');\r\n  return exportAllRates({degustationId: degustation.id});\r\n};\r\n\r\n\r\nconst resolvePath = (object, path, defaultValue) => path\r\n    .split(/[\\.\\[\\]\\'\\\"]/)\r\n    .filter(p => p)\r\n    .reduce((o, p) => o ? o[p] : defaultValue, object)\r\n\r\n","import React, {useState} from \"react\";\r\nimport {Form, Button, Col, Row} from \"react-bootstrap\";\r\nimport {rateBeer} from \"../services/Degustation\";\r\nimport {getDegustation} from \"../persistence/Persistence\";\r\n\r\nconst AskBeerRate = ({degustation, user, beer, refreshBeers, onClose}) => {\r\n  const [mask, setMask] = useState(null);\r\n  const [rate, setRate] = useState(0);\r\n  const [shout, setShout] = useState('');\r\n  return (\r\n    <div className='modal-dialog'>\r\n      <div className='modal-content'>\r\n        <div className='modal-header'>\r\n          <h5 className=\"modal-title\">\r\n            {mask ? mask : <span>Please rate beer {beer.brewery.brewery_name} {beer.beer.beer_name}</span> }\r\n          </h5>\r\n        </div>\r\n        <div className='modal-body'>\r\n          <strong>Current rate is {rate}</strong>\r\n          <Form>\r\n            <Form.Group as={Row}>\r\n              <Col>\r\n                <Form.Control\r\n                  type=\"range\"\r\n                  tooltip='on'\r\n                  step={0.5}\r\n                  min={0.5}\r\n                  max={10}\r\n                  value={rate}\r\n                  onChange={(e) => {\r\n                    setRate(e.target.value)\r\n                  }}\r\n                />\r\n              </Col>\r\n            </Form.Group>\r\n            <Form.Group as={Row}>\r\n              <Col>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={shout}\r\n                  onChange={(e) => {\r\n                    setShout(e.target.value)\r\n                  }}\r\n                />\r\n              </Col>\r\n            </Form.Group>\r\n          </Form>\r\n        </div>\r\n        <div className='modal-footer'>\r\n          <Button onClick={() => {\r\n            setMask('In progress...')\r\n            rateBeer(degustation, beer, user, rate, shout)\r\n              .then(() => {\r\n                getDegustation(degustation.id)\r\n                    .then((freshDegustation) => {\r\n                      refreshBeers(freshDegustation.beers);\r\n                      setMask(null);\r\n                      onClose();\r\n                    });\r\n              })\r\n              .catch(e => setMask('Error: ' + e.message))\r\n            ;\r\n          }}>Rate!</Button> <Button onClick={onClose}>Close</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AskBeerRate;\r\n","import React, {useState, useEffect} from \"react\";\r\nimport {Form, Button, Col, Row} from \"react-bootstrap\";\r\nimport Beer from \"./Beer\";\r\nimport {fetchBeerDetails, searchBeerOnUntappd, updateBeer} from \"../services/Beer\";\r\nimport {searchOnUntappd} from \"../services/Beer\";\r\nimport {DEGUSTATION_TYPE_EDIT} from \"./Degustation\";\r\n\r\nconst AddBeer = ({degustation, refreshBeers, user}) => {\r\n    const [beer, setBeer] = useState(null);\r\n    const [foundBeers, setFoundBeers] = useState([]);\r\n    const [isSearching, setSearching] = useState(false);\r\n    const [formDisabled, setFormDisabled] = useState(false);\r\n    const [values, setValues] = useState({\r\n        beerName: '',\r\n        breweryName: '',\r\n        beerIbu: 0,\r\n        beerAbv: 0,\r\n        beerStyle: '',\r\n        beerPlato: 0,\r\n        beerVolume: 0,\r\n        search: '',\r\n    });\r\n\r\n    useEffect(() => {\r\n        const timeOutId = setTimeout(() => search(), 500);\r\n        return () => clearTimeout(timeOutId);\r\n    }, [values.search]);\r\n\r\n    const valuesToBeer = (newValues) => {\r\n        beer.beer.beer_name = newValues.beerName;\r\n        beer.beer.beer_abv = newValues.beerAbv;\r\n        beer.beer.beer_ibu = newValues.beerIbu;\r\n        beer.beer.beer_style = newValues.beerStyle;\r\n        beer.beer.plato = newValues.beerPlato;\r\n        beer.volume = newValues.beerVolume;\r\n        beer.brewery.brewery_name = newValues.breweryName;\r\n        setBeer(beer);\r\n    }\r\n\r\n    const beerToValues = (beer) => {\r\n        values.breweryName = beer.brewery.brewery_name;\r\n        values.beerVolume = beer.volume;\r\n        values.beerPlato = beer.beer.plato;\r\n        values.beerStyle = beer.beer.beer_style;\r\n        values.beerAbv = beer.beer.beer_abv;\r\n        values.beerName = beer.beer.beer_name;\r\n        values.beerIbu = beer.beer.beer_ibu;\r\n        setValues(values);\r\n    }\r\n\r\n    const clearValues = () => {\r\n        setValues({\r\n            beerName: '',\r\n            breweryName: '',\r\n            beerIbu: 0,\r\n            beerAbv: 0,\r\n            beerStyle: '',\r\n            beerPlato: 0,\r\n            beerVolume: 0,\r\n            search: ''\r\n        });\r\n    }\r\n\r\n\r\n    const handleInputChange = e => {\r\n        const {name, value} = e.target;\r\n        setValues({...values, [name]: value});\r\n        valuesToBeer({...values, [name]: value});\r\n    }\r\n\r\n    const newBeer = () => {\r\n        const newBeer = {\r\n            id: null,\r\n            checkin_count: null,\r\n            volume: null,\r\n            picture: null,\r\n            beer: {\r\n                bid: null,\r\n                beer_name:  null,\r\n                beer_label: null,\r\n                beer_abv:  null,\r\n                beer_ibu:  null,\r\n                beer_description: null,\r\n                beer_style:  null,\r\n                rating: null,\r\n                plato:  null,\r\n                rating_score: null\r\n            },\r\n            brewery: {\r\n                brewery_id: null,\r\n                brewery_name:  null,\r\n                brewery_slug: null,\r\n                brewery_label: null,\r\n                country_name: null,\r\n            },\r\n        };\r\n\r\n        setBeer(newBeer);\r\n    }\r\n\r\n    if(null === beer) {\r\n        newBeer();\r\n    }\r\n\r\n    const search = () => {\r\n        if(isSearching) {\r\n            return;\r\n        }\r\n        if(values.search && values.search.length > 3) {\r\n            setSearching(true);\r\n            if(isNaN(values.search)) {\r\n                searchOnUntappd(values.search)\r\n                    .then(beers => {\r\n                        setFoundBeers(beers);\r\n                        console.log('found beers', beers);\r\n                        setSearching(false);\r\n                    })\r\n                    .catch(e => {\r\n                        setSearching(false);\r\n                    });\r\n            } else {\r\n                fetchBeerDetails(values.search)\r\n                    .then(beer => {\r\n                        if(beer) {\r\n                            setFoundBeers([beer]);\r\n                            console.log('found beer', beer);\r\n                        }\r\n                        setSearching(false);\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    const searchBeer = () => {\r\n        if(isSearching) {\r\n            return;\r\n        }\r\n        if(beer.beer.beer_name && beer.beer.beer_name.length > 3 && beer.brewery.brewery_name && beer.brewery.brewery_name.length > 3) {\r\n            setSearching(true);\r\n            searchBeerOnUntappd(beer)\r\n                .then(beers => {\r\n                    setFoundBeers(beers);\r\n                    console.log('found beers', beers);\r\n                    setSearching(false);\r\n                })\r\n                .catch(e => {\r\n                    setSearching(false);\r\n                });\r\n        }\r\n    }\r\n\r\n    const renderFoundBeers = (beers) => {\r\n        return beers.map(foundBeer => {\r\n            const onClick = () => {\r\n                setBeer(foundBeer);\r\n                beerToValues(foundBeer);\r\n                setFoundBeers([]);\r\n            };\r\n\r\n            return (\r\n                <Beer\r\n                    key={foundBeer.beer.uid}\r\n                    beer={foundBeer}\r\n                    user={user}\r\n                    buttons={ [{ onClick: onClick, onClickCaption: \"Select\"}] }\r\n                    mode={DEGUSTATION_TYPE_EDIT}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    return(\r\n        <div>\r\n        {beer !== null ?\r\n            <div>\r\n                <h3>Add beer</h3>\r\n                <Form>\r\n                    <Form.Group as={Row}>\r\n                        <Form.Label column sm=\"1\">\r\n                            Search\r\n                        </Form.Label>\r\n                        <Col >\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                name=\"search\"\r\n                                disabled={formDisabled}\r\n                                value={values.search}\r\n                                onChange={e=>handleInputChange(e)}\r\n                            />\r\n                        </Col>\r\n                    </Form.Group>\r\n                    <Form.Group as={Row}>\r\n                    <Form.Label column sm=\"1\">\r\n                        Brewery Name\r\n                    </Form.Label>\r\n                        <Col sm=\"5\">\r\n                    <Form.Control\r\n                        type=\"text\"\r\n                        name=\"breweryName\"\r\n                        disabled={formDisabled}\r\n                        value={values.breweryName}\r\n                        onChange={e => {\r\n                            handleInputChange(e);\r\n                            const value = e.target.value;\r\n                            setTimeout(() => {\r\n                                if(beer.brewery.brewery_name === value) {\r\n                                    searchBeer();\r\n                                }\r\n                            }, 500);\r\n\r\n                        }}\r\n                    />\r\n                        </Col>\r\n                    <Form.Label column sm=\"1\">\r\n                        Beer Name\r\n                    </Form.Label>\r\n                        <Col sm=\"5\">\r\n                    <Form.Control\r\n                        type=\"text\"\r\n                        name=\"beerName\"\r\n                        disabled={formDisabled}\r\n                        value={values.beerName}\r\n                        onChange={e => {\r\n                            handleInputChange(e);\r\n                            const value = e.target.value;\r\n                            setTimeout(() => {\r\n                                if(beer.beer.beer_name === value) {\r\n                                    searchBeer();\r\n                                }\r\n                            }, 500);\r\n\r\n                        }}\r\n                    />\r\n                        </Col>\r\n                    </Form.Group>\r\n                    <Form.Group as={Row}>\r\n                    <Form.Label column sm=\"1\">\r\n                        Abv\r\n                    </Form.Label>\r\n                        <Col sm=\"2\">\r\n                    <Form.Control\r\n                        type=\"number\"\r\n                        name=\"beerAbv\"\r\n                        disabled={formDisabled}\r\n                        value={values.beerAbv}\r\n                        onChange={handleInputChange}\r\n                    />\r\n                        </Col>\r\n                    <Form.Label column sm=\"1\">\r\n                        ibu\r\n                    </Form.Label>\r\n                    <Col sm=\"2\">\r\n                    <Form.Control\r\n                        type=\"number\"\r\n                        name=\"beerIbu\"\r\n                        disabled={formDisabled}\r\n                        value={values.beerIbu}\r\n                        onChange={handleInputChange}\r\n                    />\r\n                    </Col>\r\n                    <Form.Label column sm=\"1\">\r\n                        volume\r\n                    </Form.Label>\r\n                        <Col sm=\"2\">\r\n                    <Form.Control\r\n                        type=\"number\"\r\n                        name=\"beerVolume\"\r\n                        disabled={formDisabled}\r\n                        value={values.beerVolume}\r\n                        onChange={handleInputChange}\r\n                    />\r\n                        </Col>\r\n                    <Form.Label column sm=\"1\">\r\n                        Plato\r\n                    </Form.Label>\r\n                        <Col sm=\"2\">\r\n                    <Form.Control\r\n                        type=\"number\"\r\n                        name=\"beerPlato\"\r\n                        disabled={formDisabled}\r\n                        value={values.beerPlato}\r\n                        onChange={handleInputChange}\r\n                    />\r\n                        </Col>\r\n\r\n                    </Form.Group>\r\n\r\n                   <Form.Group as={Row}>\r\n                    <Form.Label column sm=\"1\">\r\n                        Style\r\n                    </Form.Label>\r\n                       <Col sm=\"4\">\r\n                    <Form.Control\r\n                        type=\"text\"\r\n                        name=\"beerStyle\"\r\n                        disabled={formDisabled}\r\n                        value={values.beerStyle}\r\n                        onChange={handleInputChange}\r\n                    />\r\n                       </Col>\r\n                    </Form.Group>\r\n                </Form>\r\n                <Button onClick={() => {\r\n                    if(!beer.beer.beer_name || !beer.brewery.brewery_name) {\r\n                        return;\r\n                    }\r\n                    setFormDisabled(true);\r\n                    degustation.beers.push(beer);\r\n                    console.log('before update', degustation.beers);\r\n                    updateBeer(degustation, beer)\r\n                      .then(degustation => {\r\n                          refreshBeers(degustation.beers);\r\n                          console.log('after update', degustation.beers);\r\n                          newBeer();\r\n                          clearValues();\r\n                          setFormDisabled(false);\r\n                      });\r\n\r\n                }}>Add</Button>\r\n                <Button onClick={() => {\r\n                    newBeer();\r\n                    clearValues();\r\n                }}>Clear</Button>\r\n\r\n                { foundBeers.length > 0 ?\r\n                    <div>\r\n                    <h4> Select a beer</h4>\r\n                        { renderFoundBeers(foundBeers) }\r\n                    </div>\r\n                    : ''\r\n                }\r\n            </div>\r\n            : ''\r\n        }\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\nexport default AddBeer;\r\n","import React, {useState}  from \"react\";\r\nimport {Button, Col, Form, Row} from \"react-bootstrap\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport {updateDegustation} from \"../persistence/Persistence\";\r\n\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nconst DegustationProperties = ({degustation}) => {\r\n  const [formDisabled, setFormDisabled] = useState(false);\r\n  const [editDegustationProperties, setEditDegustationProperties] = useState(false);\r\n  const [degustationValues, setDegustationValues] = useState({\r\n    title: degustation.title,\r\n    location: degustation.location ?? '',\r\n    avatar: degustation.avatar ?? '',\r\n    date: degustation.date ?\r\n      (degustation.date.seconds ? new Date(degustation.date.seconds * 1000) : new Date(degustation.date))\r\n      : new Date()\r\n  });\r\n\r\n  const handleInputChange = e => {\r\n    const {name, value} = e.target;\r\n    setDegustationValues({...degustationValues, [name]: value});\r\n  }\r\n\r\n  const handleDateChange = date => {\r\n    setDegustationValues({...degustationValues, date: date})\r\n  }\r\n\r\n  return <div>\r\n    {editDegustationProperties ?\r\n      <div>\r\n        <Form>\r\n          <Form.Group as={Row}>\r\n            <Form.Label column sm=\"2\">\r\n              Degustation Date\r\n            </Form.Label>\r\n            <Col>\r\n              <DatePicker\r\n                selected={degustationValues.date}\r\n                onChange={handleDateChange}\r\n                disabled={formDisabled}\r\n              />\r\n            </Col>\r\n            <Col> </Col>\r\n            <Col> </Col>\r\n          </Form.Group>\r\n          <Form.Group as={Row}>\r\n            <Form.Label column sm=\"2\">\r\n              Degustation Title\r\n            </Form.Label>\r\n            <Col>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"title\"\r\n                value={degustationValues.title}\r\n                onChange={handleInputChange}\r\n                disabled={formDisabled}\r\n              />\r\n            </Col>\r\n          </Form.Group>\r\n          <Form.Group as={Row}>\r\n            <Form.Label column sm=\"2\">\r\n              Degustation Avatar\r\n            </Form.Label>\r\n            <Col>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"avatar\"\r\n                value={degustationValues.avatar}\r\n                onChange={handleInputChange}\r\n                disabled={formDisabled}\r\n              />\r\n            </Col>\r\n          </Form.Group>\r\n          <Form.Group as={Row}>\r\n            <Form.Label column sm=\"2\">\r\n              Degustation Location\r\n            </Form.Label>\r\n            <Col>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"location\"\r\n                value={degustationValues.location}\r\n                onChange={handleInputChange}\r\n                disabled={formDisabled}\r\n              />\r\n            </Col>\r\n          </Form.Group>\r\n        </Form>\r\n        <Button onClick={() => {\r\n          setFormDisabled(true);\r\n          if(degustationValues.date) {\r\n            degustationValues.date = degustationValues.date.toISOString();\r\n          }\r\n          updateDegustation({...degustation, ...degustationValues})\r\n            .then(() => {\r\n              setEditDegustationProperties(false);\r\n              window.location.reload();\r\n            })\r\n            .finally(() => {\r\n              setFormDisabled(false);\r\n            })\r\n          ;\r\n        }}>\r\n          Save\r\n        </Button>\r\n        <Button onClick={() => {\r\n          setEditDegustationProperties(false);\r\n        }}>Cancel</Button>\r\n      </div>\r\n\r\n      :\r\n      <div>\r\n        <Button onClick={() => {\r\n          setEditDegustationProperties(true);\r\n        }}>\r\n          Degustation Properties\r\n        </Button>\r\n      </div>\r\n    }\r\n  </div>\r\n\r\n};\r\n\r\nexport default DegustationProperties;\r\n","import React, {useState} from \"react\";\r\nimport Beer from \"./Beer\";\r\nimport {Container, Button, Row, Col, Form} from \"react-bootstrap\";\r\nimport {updateBeer, searchBeerOnUntappd, removeBeerFromDegustation} from \"../services/Beer\";\r\nimport {exportAllRates, exportDegustationToGoogleSheet} from \"../services/Degustation\";\r\nimport AskBeerRate from \"./AskBeerRate\";\r\nimport AddBeer from \"./AddBeer\";\r\nimport Popup from \"reactjs-popup\";\r\nimport DegustationProperties from \"./DegustationProperties\";\r\n\r\n\r\nexport const DEGUSTATION_TYPE_EDIT = 'edit';\r\nexport const DEGUSTATION_TYPE_TAKE_PART = 'take_part';\r\n\r\nconst Degustation = ({\r\n                       user,\r\n                       degustation,\r\n                       mode,\r\n                       sortCurrentDegustationBeers\r\n                     }) => {\r\n\r\n\r\n  const [error, setError] = useState(null);\r\n  const [beersToSelect, setBeersToSelect] = useState([]);\r\n  const [beerToSelect, setBeerToSelect] = useState(null);\r\n  const [mask, setMask] = useState(null);\r\n  const [foundBeers, setFoundBeers] = useState([]);\r\n  const [fetchingBeerDetails, setFetchingBeerDetails] = useState(false);\r\n  const [beerToRate, setBeerToRate] = useState(null);\r\n  const [beers, setBeers] = useState(degustation.beers);\r\n\r\n  const getDegustationDate = () => degustation.date.seconds ? new Date(degustation.date.seconds * 1000).toDateString() : new Date(degustation.date).toDateString();\r\n\r\n\r\n  const pushToFoundBeers = beer => {\r\n    if('object' == typeof beer) {\r\n      const index = foundBeers.findIndex(updatedBeer => beer.id === updatedBeer.id);\r\n      if (index >= 0) {\r\n        foundBeers[index] = beer;\r\n        setFoundBeers([...foundBeers]);\r\n      } else {\r\n        foundBeers.push(beer);\r\n        setFoundBeers([...foundBeers]);\r\n      }\r\n    }\r\n  }\r\n\r\n  const searchAllBeersOnUntappd = async () => {\r\n    setMask('Searching beers on Untappd');\r\n    beers.forEach(async beer => {\r\n      try {\r\n        const searchBeers = await searchBeerOnUntappd(beer, user);\r\n        if (!searchBeers || 0 === searchBeers.length) { // has'n found a beer\r\n          pushToFoundBeers(beer);\r\n        } else if (1 === searchBeers.length) { //found exactly one beer\r\n          pushToFoundBeers({id: beer.id, ...searchBeers[0]});\r\n        } else { // found several beers\r\n          beersToSelect.push(searchBeers.map(searchBeer => {\r\n            return {id: beer.id, originalBeer: beer, ...searchBeer}\r\n          }));\r\n        }\r\n      } catch (e) {\r\n        setError(e.message);\r\n        pushToFoundBeers(beer);\r\n      }\r\n    });\r\n  }\r\n\r\n  const fetchAllBeersDetailsFromUntappd = () => {\r\n    console.log('fetching beers details', fetchingBeerDetails);\r\n    console.log('beers', beers.length);\r\n    console.log('found beers', foundBeers.length);\r\n\r\n    if (false === fetchingBeerDetails && beers.length === foundBeers.length) {\r\n      setFetchingBeerDetails(true);\r\n      setMask('Fetching beer details...');\r\n      Promise.all(\r\n        foundBeers.filter(beer => beer.beer.bid)\r\n          .map(\r\n            beer => updateBeer(degustation, beer)\r\n              .then(degustation => {\r\n                setBeers(degustation.beers);\r\n              })))\r\n        .then(() => {\r\n          setFoundBeers([]);\r\n          setMask(null);\r\n          setFetchingBeerDetails(false);\r\n        });\r\n    }\r\n  }\r\n\r\n  const refreshBeers = (beers) => {\r\n    console.log('refresh', beers);\r\n    setBeers([...beers]);\r\n  }\r\n\r\n  const renderBeers = () => {\r\n    return beers.map(beer => {\r\n      let onClick, caption;\r\n      if(DEGUSTATION_TYPE_EDIT === mode) {\r\n        onClick = () => {\r\n          setBeers(removeBeerFromDegustation(degustation, beer).beers);\r\n        };\r\n        caption = 'Delete';\r\n      } else if(DEGUSTATION_TYPE_TAKE_PART === mode) {\r\n        onClick = () => {\r\n          setBeerToRate(beer)\r\n        };\r\n        caption = 'Rate';\r\n      }\r\n      return (\r\n        <Beer\r\n          key={beer.id}\r\n          beer={beer}\r\n          user={user}\r\n          buttons={ [{ onClick: onClick,\r\n            onClickCaption: caption}] }\r\n          mode={mode}\r\n        />\r\n      );\r\n    });\r\n  };\r\n\r\n  const renderBeerForSelection = (beers) => {\r\n    return beers.map(beer => {\r\n      const onClick = () => {\r\n        pushToFoundBeers(beer);\r\n        setBeerToSelect(null);\r\n      };\r\n\r\n      return (\r\n        <Beer\r\n          key={beer.beer.uid}\r\n          beer={beer}\r\n          user={user}\r\n          buttons={ [{ onClick: onClick,\r\n            onClickCaption: \"Select\"}] }\r\n          mode={mode}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  if(beers.length > 0) {\r\n    fetchAllBeersDetailsFromUntappd();\r\n  }\r\n\r\n  if(beersToSelect.length > 0 && !beerToSelect) {\r\n    setBeerToSelect(beersToSelect.pop());\r\n    setBeersToSelect(beersToSelect);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {mask ? <div className=\"mask\">{mask}</div> : ''}\r\n      {error ? <div className=\"error\">{error}</div> : ''}\r\n      {beerToSelect\r\n        ?\r\n        <div>\r\n          <div className=\"caption\">\r\n            <Col>Please select a beer</Col>\r\n          </div>\r\n          <div className=\"sub-caption\">\r\n            <Col>Original beer</Col>\r\n            <Col>\r\n              {beerToSelect[0].originalBeer.brewery.brewery_name + ' ' + beerToSelect[0].originalBeer.beer.beer_name}\r\n            </Col>\r\n          </div>\r\n          <Container fluid>\r\n            <Row>\r\n              <Col className=\"colLabel\">Label</Col>\r\n              <Col>Untappd ID</Col>\r\n              <Col className=\"colWrap\">Brewery</Col>\r\n              <Col className=\"colWrap\">Beer Name</Col>\r\n              <Col className=\"colWrap\">Style</Col>\r\n              <Col>ABV <br /> IBU</Col>\r\n              <Col className=\"colWrap\">Description</Col>\r\n              <Col>Rate</Col>\r\n              <Col>Avg</Col>\r\n              <Col>Actions</Col>\r\n            </Row>\r\n            {renderBeerForSelection(beerToSelect)}\r\n          </Container>\r\n        </div>\r\n        :\r\n        <div>\r\n          {\r\n            beerToRate ?\r\n              <Popup position=\"center center\" defaultOpen={true} open={!!beerToRate} closeOnDocumentClick={false}>\r\n                <AskBeerRate degustation={degustation} beer={beerToRate} user={user} refreshBeers={refreshBeers} onClose={ () => {\r\n                  setBeerToRate(null)\r\n                }} />\r\n              </Popup>\r\n              : ''\r\n          }\r\n          <div className=\"caption\">\r\n            {degustation.avatar ?\r\n              <img className=\"beerLabel\" src={degustation.avatar} />\r\n              : ''}\r\n            <a href={`https://docs.google.com/spreadsheets/d/${degustation.id}/edit`} target=\"_blank\">\r\n              Degustation: {getDegustationDate()} {degustation.title}\r\n            </a>\r\n          </div>\r\n          <div>\r\n            { DEGUSTATION_TYPE_EDIT === mode ?\r\n              <div>\r\n                <DegustationProperties degustation={degustation}  />\r\n\r\n                <br />\r\n                <Button onClick={searchAllBeersOnUntappd}>Update all beers from untappd</Button>\r\n                <Button onClick={() =>\r\n                  exportAllRates(degustation)\r\n                    .then(() => {})\r\n                    .catch(() => {})\r\n                }>Export Rates</Button>\r\n              </div>\r\n              :''}\r\n          </div>\r\n          {DEGUSTATION_TYPE_EDIT === mode ? <AddBeer degustation={degustation} refreshBeers={refreshBeers} user={user} /> : '' }\r\n          <Container fluid>\r\n            <Row  className='row-cols-10'>\r\n              <Col className=\"colLabel\">Label</Col>\r\n              { DEGUSTATION_TYPE_EDIT === mode ? <Col>Untappd ID</Col> : '' }\r\n              <Col className=\"colWrap\">Brewery</Col>\r\n              <Col className=\"colWrap\">Beer Name <div center=\"true\"><Button onClick={()=>{\r\n                sortCurrentDegustationBeers(\"beer.beer_name\", \"asc\");\r\n              }}>Sort</Button></div></Col>\r\n              <Col className=\"colWrap\">Style</Col>\r\n              <Col>ABV <br /> IBU <div center=\"true\"><Button onClick={()=>{\r\n                sortCurrentDegustationBeers(\"beer.beer_abv\", \"asc\");\r\n              }}>Sort</Button></div></Col>\r\n              <Col className=\"colWrap\">Description</Col>\r\n              <Col>Rate Your/Avg</Col>\r\n              <Col>Actions</Col>\r\n            </Row>\r\n            {renderBeers()}\r\n          </Container>\r\n\r\n          {DEGUSTATION_TYPE_EDIT === mode ? <Button onClick={() => {\r\n            setMask('Exporting degustation data to google sheet');\r\n            exportDegustationToGoogleSheet(degustation)\r\n              .then(() => setMask(null));\r\n          }}>Export to Google</Button> : ''}\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Degustation;\r\n","import React, {useState}  from \"react\";\r\nimport {Button, Col, Form, Row} from \"react-bootstrap\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport {createDegustation} from \"../persistence/Persistence\";\r\n\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport {instance} from \"firebase-functions/lib/providers/database\";\r\n\r\nconst AddDegustation = () => {\r\n  const [formDisabled, setFormDisabled] = useState(false);\r\n  const [editDegustationProperties, setEditDegustationProperties] = useState(false);\r\n  const [degustationValues, setDegustationValues] = useState({\r\n    location:  '',\r\n    avatar: '',\r\n    date: new Date()\r\n  });\r\n\r\n  const handleInputChange = e => {\r\n    const {name, value} = e.target;\r\n    setDegustationValues({...degustationValues, [name]: value});\r\n  }\r\n\r\n  const handleDateChange = date => {\r\n    setDegustationValues({...degustationValues, date: date})\r\n  }\r\n\r\n  return <div>\r\n    {editDegustationProperties ?\r\n      <div>\r\n        <Form>\r\n          <Form.Group as={Row}>\r\n            <Form.Label column sm=\"2\">\r\n              Degustation Date\r\n            </Form.Label>\r\n            <Col>\r\n              <DatePicker\r\n                selected={('string' === typeof degustationValues.date  ? new Date(degustationValues.date) : degustationValues.date)}\r\n                onChange={handleDateChange}\r\n                disabled={formDisabled}\r\n              />\r\n            </Col>\r\n            <Col> </Col>\r\n            <Col> </Col>\r\n          </Form.Group>\r\n          <Form.Group as={Row}>\r\n            <Form.Label column sm=\"2\">\r\n              Degustation Title\r\n            </Form.Label>\r\n            <Col>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"title\"\r\n                value={degustationValues.title}\r\n                onChange={handleInputChange}\r\n                disabled={formDisabled}\r\n              />\r\n            </Col>\r\n          </Form.Group>\r\n          <Form.Group as={Row}>\r\n            <Form.Label column sm=\"2\">\r\n              Degustation Avatar\r\n            </Form.Label>\r\n            <Col>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"avatar\"\r\n                value={degustationValues.avatar}\r\n                onChange={handleInputChange}\r\n                disabled={formDisabled}\r\n              />\r\n            </Col>\r\n          </Form.Group>\r\n          <Form.Group as={Row}>\r\n            <Form.Label column sm=\"2\">\r\n              Degustation Location\r\n            </Form.Label>\r\n            <Col>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"location\"\r\n                value={degustationValues.location}\r\n                onChange={handleInputChange}\r\n                disabled={formDisabled}\r\n              />\r\n            </Col>\r\n          </Form.Group>\r\n        </Form>\r\n        <Button onClick={() => {\r\n          setFormDisabled(true);\r\n          createDegustation(\r\n              degustationValues.date instanceof Date ?  degustationValues.date.toISOString(): degustationValues.date,\r\n              degustationValues.title,\r\n              degustationValues.avatar,\r\n              degustationValues.location\r\n          )\r\n            .then(() => {\r\n              setEditDegustationProperties(false);\r\n              window.location.reload();\r\n            })\r\n            .finally(() => {\r\n              setFormDisabled(false);\r\n            })\r\n          ;\r\n        }}>\r\n          Save\r\n        </Button>\r\n        <Button onClick={() => {\r\n          setEditDegustationProperties(false);\r\n        }}>Cancel</Button>\r\n      </div>\r\n\r\n      :\r\n      <div>\r\n        <Button onClick={() => {\r\n          setEditDegustationProperties(true);\r\n        }}>\r\n          New Degustation\r\n        </Button>\r\n      </div>\r\n    }\r\n  </div>\r\n\r\n};\r\n\r\nexport default AddDegustation;\r\n","import React, {useState}  from \"react\";\r\nimport {getDegustation, getDegustations, updateDegustation} from \"../persistence/Persistence\";\r\nimport Degustation, {DEGUSTATION_TYPE_EDIT, DEGUSTATION_TYPE_TAKE_PART} from \"./Degustation\";\r\nimport {navigate, useMatch} from \"@reach/router\";\r\nimport {Container, Row, Col, Button} from \"react-bootstrap\";\r\nimport {sortBeers} from \"../services/Degustation\";\r\n\r\nimport firebase from \"firebase\";\r\nimport AddDegustation from \"./AddDegustation\";\r\n// import {onMessageListener} from \"../firebase\";\r\n\r\n\r\n\r\nconst Degustations = ({user}) => {\r\n  const [degustations, setDegustations] = useState(null);\r\n  const [degustation, setDegustation] = useState(null);\r\n  const [degustationMode, setDegustationMode] = useState(null);\r\n\r\n      const match = useMatch('/Degustations/:degustationId/:mode');\r\n      if (degustations && match && !degustation) {\r\n          setDegustation(degustations.find(degustation => degustation.id === match.degustationId));\r\n          setDegustationMode(match.mode);\r\n      }\r\n\r\n  if(degustation){\r\n      window.history.replaceState(null, `Degustation ${degustationMode}`, `/Degustations/${degustation.id}/${degustationMode}`);\r\n  }\r\n  const refreshDegustation = async () => {\r\n      if (degustation) {\r\n          const newDegustation = await getDegustation(degustation.id);\r\n          setDegustation(newDegustation);\r\n      }\r\n\r\n  };\r\n  const renderDegustations = () => {\r\n\r\n    return degustations.map(degustation => {\r\n      return (\r\n        <Row key={degustation.id}>\r\n          <Col>\r\n            {degustation.date.seconds ? new Date(degustation.date.seconds * 1000).toDateString() : new Date(degustation.date).toDateString()}\r\n          </Col><Col>\r\n            {degustation.title}\r\n          </Col><Col>\r\n            {degustation.beers.length}\r\n          </Col><Col>\r\n            <Button onClick={() => {\r\n                setDegustation(degustation);\r\n                setDegustationMode(DEGUSTATION_TYPE_EDIT);\r\n              }\r\n            }>Edit</Button>\r\n          </Col>\r\n            <Col>\r\n                <Button onClick={async () => {\r\n                    const registerUserForDegustation = firebase.functions().httpsCallable('registerUserForDegustation');\r\n                    registerUserForDegustation({degustationId:degustation.id, userId:user.uid })\r\n                        .then(result => setDegustation(result.data));\r\n\r\n                    setDegustationMode(DEGUSTATION_TYPE_TAKE_PART);\r\n                }}>\r\n                    Join degustation\r\n                </Button>\r\n            </Col>\r\n        </Row>\r\n      );\r\n    });\r\n\r\n  }\r\n\r\n\r\n  const sortCurrentDegustationBeers = (fieldName, direction) => {\r\n      if(degustation) {\r\n        const sortedDegustation = {...degustation, beers: sortBeers(degustation.beers, fieldName, direction)};\r\n        setDegustation(sortedDegustation);\r\n        if(DEGUSTATION_TYPE_EDIT === degustationMode) {\r\n          updateDegustation(sortedDegustation);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (null === degustations) {\r\n        getDegustations()\r\n            .then(degustations =>\r\n            {\r\n                const sortedDegustations = degustations.sort((a, b) =>  {\r\n                    const date1 = (a.date.seconds ? new Date(a.date.seconds * 1000) : new Date(a.date));\r\n                    const date2 = (b.date.seconds ? new Date(b.date.seconds * 1000) : new Date(b.date));\r\n                    return (date2 - date1);\r\n                });\r\n                setDegustations(sortedDegustations);\r\n            });\r\n    }\r\n\r\n\r\n  // onMessageListener()\r\n  //   .then((payload) => {\r\n  //     const {body, data} = payload.data;\r\n  //     if ('Degustation update' === body) {\r\n  //       setDegustation(data);\r\n  //     }\r\n  //   })\r\n  //   .catch((err) => {console.log('Message error', err)});\r\n\r\n  return (\r\n\r\n    <div>\r\n      {\r\n        degustation ?\r\n        <div>\r\n          <Degustation degustation={degustation} user={user} mode={degustationMode} sortCurrentDegustationBeers={sortCurrentDegustationBeers}/>\r\n          <Button onClick={() => {\r\n              setDegustation(null);\r\n              navigate('/Degustations');\r\n          }}>Close</Button>\r\n        </div> : (\r\n            degustations ?\r\n              <div>\r\n              <AddDegustation />\r\n              <div className=\"table-action\">\r\n                  <Button onClick={() => {navigate('/DegustationSelector')}}>Import degustation</Button>\r\n              </div>\r\n\r\n                <Container>\r\n              <Row>\r\n                <Col>Date</Col><Col> Title</Col><Col> Beers count</Col><Col>Actions</Col>\r\n              </Row>\r\n              {renderDegustations()}\r\n            </Container>\r\n              </div>\r\n            :\r\n            <div>\"Loading...\"</div>\r\n          )\r\n      }\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\nexport default Degustations;\r\n\r\n\r\n","import React, {useState} from \"react\";\r\n\r\nimport GooglePicker from 'react-google-picker';\r\n\r\nimport config from \"../config\";\r\nimport firebase from \"firebase\";\r\nimport Degustation, {DEGUSTATION_TYPE_EDIT} from \"./Degustation\";\r\nimport {navigate} from \"@reach/router\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport setDegustationMode from \"./Degustations\";\r\n\r\n//qeh7X9boOseEuegdzVbY1eP7\r\nconst DegustationSelector = () => {\r\n  const [degustation, setDegustation] = useState(null);\r\n  const [mask, setMask] = useState(null);\r\n\r\n  const fetchGoogleSheet = async (data) => {\r\n    if ('picked' === data.action) {\r\n      const doc = data.docs[0];\r\n      const getDegustationDataFromGoogleSheet = firebase.functions().httpsCallable('getDegustationDataFromGoogleSheet');\r\n      setMask('Importing...');\r\n      getDegustationDataFromGoogleSheet({\r\n        id: doc['id']\r\n      })\r\n        .then(result => {\r\n           setDegustation({id: doc['id'], ...result.data});\r\n           setMask(null);\r\n           setDegustationMode(DEGUSTATION_TYPE_EDIT);\r\n          })\r\n      ;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {mask ? <div>{mask}</div> : ''}\r\n      <Button onClick={() => {navigate('/Degustations')}}>Degustations List</Button>\r\n      {\r\n        degustation ?\r\n          <div>\r\n            <Button onClick={() => {navigate('/DegustationSelector')}}>Import another</Button>\r\n            <Degustation degustation={degustation} mode={DEGUSTATION_TYPE_EDIT}/>\r\n          </div>\r\n          :\r\n          <GooglePicker clientId={config.googleClientId}\r\n                        developerKey={config.googleDeveloperKey}\r\n                        scope={['https://www.googleapis.com/auth/drive', 'https://www.googleapis.com/auth/spreadsheets']}\r\n                        onChange={data => fetchGoogleSheet(data)}\r\n                        onAuthFailed={data => console.log('on auth failed:', data)}\r\n                        multiselect={false}\r\n                        navHidden={true}\r\n                        authImmediate={false}\r\n                        mimeTypes={['application/vnd.google-apps.spreadsheet']}\r\n                        query={'Дегустація'}\r\n                        viewId={'FOLDERS'}>\r\n          </GooglePicker>\r\n      }\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default DegustationSelector;\r\n","import React from \"react\";\r\nimport { Router } from \"@reach/router\";\r\nimport SignIn from \"./SignIn\";\r\nimport UserProfile from \"./UserProfile\";\r\nimport UntappdCallback from \"./UntappdCallback\";\r\nimport UserEdit from \"./UserEdit\";\r\nimport DegustationSelector from \"./DegustationSelector\";\r\nimport Degustations from \"./Degustations\";\r\nimport Degustation from \"./Degustation\";\r\n\r\nfunction Application(prop) {\r\n  const user = prop.user;\r\n\r\n  return (\r\n    user && user.email ?\r\n      <Router>\r\n        <UserProfile user={user} path=\"/\" />\r\n        <UserEdit user={user} path=\"Edit\" />\r\n        <DegustationSelector path=\"DegustationSelector\" />\r\n        <Degustations user={user} path=\"Degustations\" />\r\n        <Degustations user={user} path=\"Degustations/:degustationId/:mode\" />\r\n        <Degustation user={user} path=\"Degustation\" />\r\n        <UntappdCallback user={user} path=\"callback\" />\r\n      </Router>\r\n      :\r\n      <Router>\r\n        <SignIn path=\"/\" />\r\n      </Router>\r\n\r\n  );\r\n}\r\nexport default Application;\r\n","import  React, { useEffect, useState } from \"react\";\r\nimport {auth} from \"./firebase\";\r\nimport Application from \"./components/Application\";\r\nimport {createUser} from \"./persistence/Persistence\";\r\n\r\n\r\nconst App = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [previousUserAuth, setPreviousUserAuth] = useState(null);\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged(async userAuth => {\r\n      if(userAuth !== previousUserAuth) {\r\n        setPreviousUserAuth(userAuth);\r\n        const user = await createUser(userAuth);\r\n        console.log('Token ID changed: ', user);\r\n        setUser(user);\r\n      }\r\n    });\r\n  });\r\n\r\n  // requestFirebaseNotificationPermission()\r\n  //   .then(token => {\r\n  //     const saveToken = firebase.functions().httpsCallable('addMessageToken');\r\n  //     saveToken({token: token});\r\n  //   });\r\n\r\n  return(\r\n    <div>\r\n      <Application user = {user} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport \"bootstrap-social/bootstrap-social.css\";\r\nimport \"font-awesome/css/font-awesome.css\";\r\nimport \"./index.scss\";\r\n\r\n\r\nconst app = (\r\n  <App />\r\n);\r\n\r\nReactDOM.render(app, document.getElementById(\"root\"));\r\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 656;"],"sourceRoot":""}